<!DOCTYPE html>
<html>
<head>
    <title>Markdown测试</title>
</head>
<body>
    <h1>Markdown识别测试</h1>
    <div id="results"></div>

    <script>
        // 复制containsMarkdown函数的逻辑
        function containsMarkdown(text) {
            const markdownPatterns = [
                /[*_]{1,2}[^*_]+[*_]{1,2}/,  // 斜体或粗体
                /^#+\s/m,                    // 标题
                /!\[.*?\]\(.*?\)/,           // 图片
                /\[.*?\]\(.*?\)/,            // 链接
                /^-\s/m,                     // 无序列表
                /^[0-9]+\.\s/m,              // 有序列表
                /`{1,3}[^`]+`{1,3}/,         // 代码块或内联代码
                /^>\s/m,                     // 引用
                /^---+$/m,                   // 水平线
                /\|(.+\|)+/,                 // 表格
                /\n\s*\n/                    // 包含空行（两个换行符之间可能有空白字符）
            ];
            
            return markdownPatterns.some(pattern => pattern.test(text));
        }

        // 测试数据库中的实际文本
        const actualText = "**新问题**\n新问题";
        
        const results = document.getElementById('results');
        
        results.innerHTML = `
            <h2>测试结果</h2>
            <p><strong>测试文本:</strong> ${JSON.stringify(actualText)}</p>
            <p><strong>containsMarkdown结果:</strong> ${containsMarkdown(actualText)}</p>
            
            <h3>各个正则表达式的匹配结果:</h3>
            <ul>
                <li>加粗/斜体 (/[*_]{1,2}[^*_]+[*_]{1,2}/): ${/[*_]{1,2}[^*_]+[*_]{1,2}/.test(actualText)}</li>
                <li>标题 (/^#+\s/m): ${/^#+\s/m.test(actualText)}</li>
                <li>图片 (/!\[.*?\]\(.*?\)/): ${/!\[.*?\]\(.*?\)/.test(actualText)}</li>
                <li>链接 (/\[.*?\]\(.*?\)/): ${/\[.*?\]\(.*?\)/.test(actualText)}</li>
                <li>无序列表 (/^-\s/m): ${/^-\s/m.test(actualText)}</li>
                <li>有序列表 (/^[0-9]+\.\s/m): ${/^[0-9]+\.\s/m.test(actualText)}</li>
                <li>代码 (/\`{1,3}[^\`]+\`{1,3}/): ${/`{1,3}[^`]+`{1,3}/.test(actualText)}</li>
                <li>引用 (/^>\s/m): ${/^>\s/m.test(actualText)}</li>
                <li>水平线 (/^---+$/m): ${/^---+$/m.test(actualText)}</li>
                <li>表格 (/\|(.+\|)+/): ${/\|(.+\|)+/.test(actualText)}</li>
                <li>空行 (/\n\s*\n/): ${/\n\s*\n/.test(actualText)}</li>
            </ul>
            
            <h3>加粗正则表达式详细测试:</h3>
            <p>匹配内容: ${JSON.stringify(actualText.match(/[*_]{1,2}[^*_]+[*_]{1,2}/))}</p>
        `;
    </script>
</body>
</html>
